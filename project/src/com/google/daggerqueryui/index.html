<!--Copyright 2020 Google LLC-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--https://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<html>
<head>
    <title>Dagger Query UI</title>

    <link rel="stylesheet" href="third-party/css/bootstrap.min.css">
    <link rel="stylesheet" href="third-party/css/mdb.min.css">
    <link rel="stylesheet" href="third-party/css/roboto-fonts.css">
    <link rel="stylesheet" href="index.css">

    <!-- JQuery -->
    <script src="third-party/js/jquery.min.js" defer></script>
    <!-- MDB core JavaScript -->
    <script src="third-party/js/mdb.min.js" defer></script>
    <!-- Bootstrap tooltips -->
    <script src="third-party/js/popper.min.js" defer></script>
    <!-- Bootstrap core JavaScript -->
    <script src="third-party/js/bootstrap.min.js" defer></script>
    <!-- Vis.js -->
    <script src="third-party/js/vis-network.min.js" defer></script>
</head>
<body>

<div class="container" id="query-text-field">
    <div class="row align-items-center">
        <div class="col-10">
            <div class="md-form form-lg interactive-input-container">
                <div class="form-control form-control-lg query-name"></div>
                <input type="text"
                       id="query-input"
                       class="form-control form-control-lg"
                       spellcheck="false">
                <label for="query-input">
                    Your query
                </label>
            </div>
        </div>
        <div class="col-1" style="background: #FFF;">
            <a tabindex="0"
               id="help-button"
               popover-content="#instructions"
               data-toggle="popover"
               data-trigger="active">
                <img src="res/help-button-icon.svg" id="question-icon"/>
            </a>

            <div class="hidden" id="instructions">
                <div class="popover-heading">
                    How to use <b>Dagger Query UI</b>?
                </div>
                <div class="popover-body">
                    You can execute the following queries by entering them in the input field:
                    <ul>
                        <li>
                            <b class="query-name">deps</b>
                            <b>binding</b> - to see all node dependencies,
                        </li>
                        <li>
                            <b class="query-name">rdeps</b>
                            <b>binding</b> - to see all nodes that depend on the binding,
                        </li>
                        <li>
                            <b class="query-name">allpaths</b>
                            <b>source target</b> - to see all paths between source and target nodes,
                        </li>
                        <li>
                            <b class="query-name">somepath</b>
                            <b>source target</b> - to see some path between source and target nodes.
                        </li>
                    </ul>
                    <p>
                        To traverse an arbitrary graph use <b class="action-name">right-click</b> for showing node
                        ancestors and <b class="action-name">left-click</b> for showing node dependencies.
                        You can use the same actions to hide dependencies and ancestors as well.
                    </p>
                    <p>
                        Consider the ability to simply <b class="action-name">specify the binding name</b>
                        in the input field - if the graph contains such a node, it will be drawn on the plane.<br><br>
                        The <b class="tool-element-name">switch element</b> allows you to control physics.
                        Use the <b class="tool-element-name">clear button</b> located in the lower
                        right corner to clear the plane.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-1">
            <div class="custom-control custom-switch custom-switch-large"
                 id="physics-switch"
                 title="Turn on physics?"
                 data-toggle="tooltip">
                <input type="checkbox" class="custom-control-input" id="physics-switch-input">
                <label class="custom-control-label" for="physics-switch-input"></label>
            </div>
        </div>
    </div>
    <div id="error-message" class="text-danger"></div>
</div>
<div id="clear-button-container">
    <img src="res/clear-button-icon.svg" id="clear-icon"/>
</div>
<div id="binding-graph"></div>
<!-- Disables context menu which appears after right-clicking -->
<script src="scripts/disable-context-menu.js" defer></script>
<!-- Activates popover from Bootstrap -->
<script src="scripts/enables-popover.js" defer></script>
<!-- Setups switch for managing physics and activates tooltip from Bootstrap -->
<script src="scripts/setup-tools.js" defer></script>
<!-- Interactive binding graph displayed on the page -->
<script src="scripts/binding-graph.js" defer></script>
<!-- Tries to execute a query and highlights its name when it is valid -->
<script src="scripts/analyze-input-field-content.js" defer></script>
</body>

</html>
